var Ye=Object.create;var Z=Object.defineProperty,Ze=Object.defineProperties,Qe=Object.getOwnPropertyDescriptor,et=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertyNames,Y=Object.getOwnPropertySymbols,nt=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var Te=(t,o,r)=>o in t?Z(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,O=(t,o)=>{for(var r in o||(o={}))he.call(o,r)&&Te(t,r,o[r]);if(Y)for(var r of Y(o))xe.call(o,r)&&Te(t,r,o[r]);return t},K=(t,o)=>Ze(t,et(o)),ot=t=>Z(t,"__esModule",{value:!0});var De=(t,o)=>{var r={};for(var c in t)he.call(t,c)&&o.indexOf(c)<0&&(r[c]=t[c]);if(t!=null&&Y)for(var c of Y(t))o.indexOf(c)<0&&xe.call(t,c)&&(r[c]=t[c]);return r};var rt=(t,o,r,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of tt(o))!he.call(t,i)&&(r||i!=="default")&&Z(t,i,{get:()=>o[i],enumerable:!(c=Qe(o,i))||c.enumerable});return t},it=(t,o)=>rt(ot(Z(t!=null?Ye(nt(t)):{},"default",!o&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);import{j as st,a as at,F as ct,u as U,l as F,y as T,d as V,s as Re,b as lt,A as dt,T as N,t as Be,S as ht,c as ut,e as mt,f as pt,g as Pe,i as ue,B as gt,h as ft,k as yt}from"./vendor.5310af07.js";import{t as re}from"./pinyin.965d34aa.js";import{i as bt}from"./all-idioms.effcc4de.js";import{d as wt}from"./game-idioms.357fe011.js";function sn(){Promise.resolve().then(()=>it(require("data:text/javascript,")))}const vt=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}};vt();const Ct=(t,o)=>{const r=typeof o=="string"?o.split(""):o,c=typeof t=="string"?t.split(""):t,i=r.length,l=Array.from({length:i},()=>"\u2B1C");if(i!==c.length)throw new Error("idioms must have the same length");const f=[];for(let w=0;w<i;w++){const y=r[w],k=c[w];y===k&&(l[w]="\u{1F7E9}",f.push(w))}const p=[];for(let w=0;w<i;w++){const y=r[w],k=c[w];if(y!==k){const I=c.findIndex((b,M)=>b===y&&!f.includes(M)&&!p.includes(M));I!==-1&&(l[w]="\u{1F7E7}",p.push(I))}}return l},e=st,a=at,H=ct,P=re;window.pinyin=re;const W=t=>Be(t),oe=(t,o=()=>{})=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(o).catch(r=>{}):(mt(t),o())},x={getItem:t=>{try{return localStorage.getItem(t)}catch(o){return null}},setItem:(t,o)=>{try{return localStorage.setItem(t,o)}catch(r){return null}},removeItem:t=>{try{return localStorage.removeItem(t)}catch(o){return null}}},A=(...t)=>{window.plausible&&plausible(...t)},Me=bt.split(`
`),E=wt.slice(1).map(t=>({id:t[0],idiom:t[1]})),C="cywd-",G=JSON.parse(x.getItem(`${C}hardMode`)||!1),Ne=7e3,ge=4,Q=G?40:20,He=6,me=G?10:6;G&&A("Hard mode");window.clearGames=()=>{try{const{length:t}=localStorage;for(let o=0;o<t;o++){const r=localStorage.key(o);(r==null?void 0:r.startsWith(C))&&localStorage.removeItem(r)}}catch(t){}};window.allGames=()=>{const t=new Map,{length:o}=localStorage;for(let r=0;r<o;r++){const c=localStorage.key(r);if(c.startsWith(C)){const i=JSON.parse(localStorage.getItem(c));t.set(c.replace(C,""),i)}}return t};const kt=()=>{try{return Object.entries(localStorage).filter(([o,r])=>{const c=o.startsWith(C);if(!c)return!1;const i=o.slice(C.length);return c&&E.find(l=>l.id===i)}).map(([o,r])=>{const c=o.slice(C.length),i=JSON.parse(r);return O({id:c},i)})}catch(t){}},It=(t,o=!1)=>{try{t.forEach(r=>{const l=r,{id:c}=l,i=De(l,["id"]);(o||!localStorage.getItem(`${C}${c}`))&&x.setItem(`${C}${c}`,JSON.stringify(i))})}catch(r){}},Ae=t=>{if(t.some(i=>!!i.length&&i.every(l=>l==="\u{1F7E9}")))return"won";const r=t[t.length-1];return!!r.length&&r.every(i=>i!=="\u{1F7E9}")?"lost":null},ze=()=>Array.from({length:He},()=>({v:Array.from({length:ge},()=>""),s:!1})),fe=(t,o,r,c=0)=>{var w;let i=o||new Set;i.add(t);let l=r||new Set;const f=t.split("");f.forEach(y=>l.add(y));let p=0;e:for(let y=0;y<E.length;y++){const k=f[(y+1)%ge],I=E.find(({idiom:b})=>!i.has(b)&&b.includes(k));if(I){for(let b=0;b<I.idiom.length;b++)if(l.add(I.idiom[b]),l.size>=Q)break e;i.add(I.idiom),p=0}else{if(p>=ge+1)break e;p+=1}}if(l.size<Q||i.size<me){const y=[...i][++c];if(y){const{passedIdioms:k,keys:I}=fe(y,i,l,c);i=k,l=I}}if(l.size<Q||i.size<me){const y=E[Math.floor(Math.random()*E.length)].idiom;if(y){const{passedIdioms:k,keys:I}=fe(y,i,l,0);i=k,l=I}}if(l.size<Q||i.size<me){const y=(w=E.find(k=>k.idiom===t))==null?void 0:w.id;console.error(y,{possibleIdioms:i.size,keySize:l.size,consecutiveFailures:p})}return{passedIdioms:i,keys:l}},St=t=>e("svg",K(O({viewBox:"0 0 24 24",fill:"currentColor"},t),{children:e("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})})),$t=t=>a("svg",K(O({viewBox:"0 0 330 330",fill:"currentColor"},t),{children:[e("title",{children:"\u2B07\uFE0F"}),e("path",{d:"m154 256 1 1h2v1h1l1 1h2v1h8v-1h2l1-1h1v-1h2l1-1 70-70a15 15 0 0 0-22-22l-44 45V25a15 15 0 0 0-30 0v184l-44-45a15 15 0 1 0-22 22z"}),e("path",{d:"M315 160c-8 0-15 7-15 15v115H30V175a15 15 0 0 0-30 0v130c0 8 7 15 15 15h300c8 0 15-7 15-15V175c0-8-7-15-15-15z"})]})),ee=t=>a("svg",K(O({viewBox:"0 0 20 20",fill:"currentColor"},t),{children:[e("title",{children:"\u25B6\uFE0F"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})]})),pe=t=>a("svg",K(O({viewBox:"0 0 24 24"},t),{children:[e("title",{children:"\u2716\uFE0F"}),e("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]})),Et=t=>a("svg",K(O({fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t),{children:[e("title",{children:"\u2139\uFE0F"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})),_e=new Date(2022,0,27),te=()=>{const o=new Date().setHours(0,0,0,0)-_e,r=Math.floor(o/(1e3*60*60*24));return E[Math.max(0,r%E.length)]},Lt=()=>{const{t}=U();let o=new Date().setHours(0,0,0,0)+24*60*60*1e3;const r=new Date(+_e+24*60*60*1e3);o<r&&(o=r);const[c,i]=F("00"),[l,f]=F("00"),[p,w]=F("00"),[y,k]=F(!1);return T(()=>{const I=setInterval(()=>{const b=o-new Date;if(b<=0){k(!0),clearInterval(I);return}i(Math.floor(b/36e5).toString().padStart(2,"0")),f(Math.floor(b/6e4%60).toString().padStart(2,"0")),w(Math.floor(b/1e3%60).toString().padStart(2,"0"))},1e3);return()=>clearInterval(I)},[]),y?e("a",{href:"./",children:t("ui.countdownNow")}):a("time",{class:"countdown",children:[c,":",l,":",p]})},Ge=({code:t,url:o})=>{const{t:r}=U();return t&&e("input",{type:"text",readOnly:!0,value:t,class:"idiom-code",onClick:c=>{c.target.focus(),c.target.select(),oe(o||t,()=>{W(r("ui.copiedURL"))}),A("Click: Share",{props:{type:"idiom-code"}})}})},ne=({letter:t,pinyin:o,state:r})=>e("div",{class:`letter ${t?"lettered":""} ${r!=null?r:""} ${r?"\u{1F308}":""}`,children:a("ruby",{children:[t||e("span",{style:{opacity:0},children:"\u4E00"}),e("rp",{children:"("}),e("rt",{children:o||P(t)||e(H,{children:"\xA0"})}),e("rp",{children:")"})]})}),Ft=()=>{const{t}=U(),[o,r]=F(0);return T(()=>{let c,i;const l=()=>{fetch("https://chengyu-wordle-realtime-visitors.cheeaun.workers.dev/").then(f=>{if(!f.ok)throw Error(f.statusText);return f.text()}).then(f=>{const p=+f;if(!p)throw Error("Zero or NaN");r(p)}).catch(f=>{r(0)}),c=setTimeout(()=>{i=requestAnimationFrame(l)},12e4)};return l(),()=>{clearTimeout(c),cancelAnimationFrame(i)}},[]),o<=1?null:e("div",{id:"current-playing",children:t("ui.countPlaying",{count:o})})};let Oe;const Tt=()=>{const t=["#008000","#FFA500"];(function o(){Pe({particleCount:2,angle:60,spread:80,origin:{x:0,y:1},colors:t,shapes:["square"],disableForReducedMotion:!0}),Pe({particleCount:2,angle:120,spread:80,origin:{x:1,y:1},colors:t,shapes:["square"],disableForReducedMotion:!0}),Oe=requestAnimationFrame(o)})()},xt=()=>{cancelAnimationFrame(Oe)},Dt=()=>{const{t}=U();let o=0,r=0;const c=E.map(i=>{const l=JSON.parse(x.getItem(`${C}${i.id}`));if(l&&l.gameState){const{board:f,gameState:p}=l;return p==="won"?o++:p==="lost"&&r++,e("a",{href:`/#${i.id}`,class:`board ${p}`,title:`${i.id} (${p})`,children:p==="won"?"\u{1F7E9}":"\u{1F7E7}"})}else return e("a",{href:`/#${i.id}`,class:"board",title:`${i.id}`,children:"\u2B1C"})});return T(()=>(Tt(),xt),[]),a(H,{children:[e("h2",{children:t("dashboard.heading",{gamesCount:Ne})}),e("p",{children:t("dashboard.subheading")}),a("p",{children:[e(N,{i18nKey:"dashboard.totalGamesPlayed",values:{gamesCountOverTotal:`${o+r} / ${E.length}`},components:[e("b",{})]}),e("br",{}),e(N,{i18nKey:"dashboard.wonLost",values:{wonCount:o,lostCount:r},components:[e("b",{}),e("b",{})]})]}),e("div",{class:"boards",children:c})]})},ye="matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").media!=="not all",Pt=({header:t,footer:o,boardStates:r,id:c})=>{const{t:i}=U(),l=Re(null),[f,p]=F(null),w={canvasWidth:1080,canvasHeight:1080,quality:.5},[y,k]=F();T(()=>{if(!ye)return;const b=window.matchMedia("(prefers-color-scheme: dark)"),M=u=>{k(u.matches)};try{b.addEventListener("change",M)}catch(u){b.addListener(M)}return()=>{try{b.removeEventListener("change",M)}catch(u){b.removeListener(M)}}}),T(()=>{p(null),pt(l.current,w).then(b=>{p(b)}).catch(b=>{p(null)})},[r,c,y]);const I=`chengyu-wordle-${c}.jpg`;return a(H,{children:[!!f&&a("a",{id:"share-image-button",class:"button",href:f,download:I,target:"_blank",onClick:()=>{A("Click: Share",{props:{type:"image"}})},children:[i("common.image")," ",e($t,{width:"12",height:"12"})]}),e("div",{id:"share-image-container",children:a("div",{id:"share-image",ref:l,children:[e("p",{class:"header",children:e("b",{children:t})}),e("div",{class:"board",children:r.map(b=>e("div",{children:b.map(M=>e("span",{class:`tile ${M}`}))}))}),e("p",{class:"footer",children:o})]})})]})};function Mt(){var Ee;const{t,i18n:o}=U(),[r,c]=F(!1),[i,l]=F(!1),[f,p]=F(!1),[w,y]=F(!1),[k,I]=F(x.getItem(`${C}colorScheme`)||"auto");T(()=>{if(!ye)return;const n=document.querySelector("html");k==="dark"?(n.classList.add("dark-mode"),n.classList.remove("light-mode")):k==="light"?(n.classList.add("light-mode"),n.classList.remove("dark-mode")):n.classList.remove("dark-mode","light-mode")},[k]);const[b,M]=F(x.getItem(`${C}skipFirstTime`)||!1),[u,je]=F(E.find(n=>n.id===location.hash.slice(1))||te());T(()=>{window.addEventListener("hashchange",()=>{je(E.find(n=>n.id===location.hash.slice(1))||te()),c(!1)})},[]);const[$,q]=F(((Ee=JSON.parse(x.getItem(`${C}${u.id}`)))==null?void 0:Ee.board)||ze());T(()=>{const n=x.getItem(`${C}${u.id}`);q(n?JSON.parse(n).board:ze())},[u.id]);const R=V(()=>$.map((n,s)=>n.s?Ct(u.idiom,n.v):[]),[$]);T(()=>{$&&$.some(n=>n.v.some(s=>s))&&x.setItem(`${C}${u.id}`,JSON.stringify({board:$,gameState:Ae(R)}))},[R]);const[v,be]=F(null);T(()=>{be(null),fetch(`https://baidu-hanyu-idiom.cheeaun.workers.dev/?wd=${u.idiom}`).then(n=>n.json()).then(n=>{n.definition&&be(n.definition)}).catch(()=>{})},[u.idiom]);const z=($==null?void 0:$.findIndex(n=>n.s===!1))||0,[ie,J]=V(()=>{const{keys:n}=fe(u.idiom),s=Me.filter(d=>d.split("").every(S=>n.has(S))),h=new Map;s.forEach(d=>{re(d,{type:"array"}).forEach((_,D)=>{h.has(d[D])?h.get(d[D]).add(_):h.set(d[D],new Set([_]))})}),h.forEach((d,S)=>{d.add(P(S))});const m=s.map(d=>`${d} (${P(d)})`).sort((d,S)=>d.localeCompare(S,"zh"));return console.groupCollapsed&&(console.groupCollapsed(`${m.length} Possible Idioms [${u.id}] (${n.size} keys):`),console.log(`${m.map((d,S)=>`${S+1}. ${d}`).join(`
`)}

\u{1F6A8}SPOILER\u{1F6A8} Type 'HINTS' to see all hints. Type 'ANSWER' to see the answer.`),console.groupEnd()),window.ANSWER=`${u.idiom} (${P(u.idiom)})`,[[...n].sort((d,S)=>d.localeCompare(S,"zh")),h]},[u.idiom]),se=(n,s=!1)=>{if(!$[z]||L)return;l(!1);const h=[...$];let m=h[z].v.findIndex(g=>g==="");s&&(m===-1?m=3:m--),m!==-1&&(h[z].v[m]=n,q(h))},ae=new Set,ce=new Set,le=new Set;$.forEach((n,s)=>{!n.s||n.v.forEach((h,m)=>{const g=R[s][m];g==="\u{1F7E9}"?ae.add(h):g==="\u{1F7E7}"?ce.add(h):g==="\u2B1C"&&le.add(h)})});const we=()=>{if(L)return;console.log("handleEnter"),l(!1);const n=$[z];if(!n)return;const s=n.v.join(""),h=Me.includes(s);h?(n.s=!0,q([...$])):setTimeout(()=>{l(!0)},10),console.log({currentIdiom:s,valid:h})},L=V(()=>Ae(R),[R]);T(()=>{let n;return L==="won"?n=setTimeout(()=>{p("won")},600):p(L==="lost"?"lost":!1),()=>{clearTimeout(n)}},[L]);const ve=()=>{if(L)return;const n=[...$],s=n[z];if(!s||s.s)return;let h=-1;for(let m=s.v.length-1;m>=0;m--)if(s.v[m]!==""){h=m;break}h!==-1&&(s.v[h]="",q(n))};T(()=>{const n=s=>{if(L||s.metaKey||s.ctrlKey||!s.key)return;const h=s.key.toLowerCase();if(h==="enter")s.preventDefault(),s.stopPropagation(),we();else if(h==="backspace")s.preventDefault(),ve();else if(/^arrow(left|right)/i.test(h)){const d=[...$[z].v].reverse().find(S=>S!=="");if(d){const S=P(d)[0],_=new Set;J.forEach((Je,Ve)=>{Je.forEach(Xe=>{Xe[0].localeCompare(S,"en",{sensitivity:"base"})===0&&_.add(Ve)})});const D=[..._];if(D.length<=1)return;const Le=D.indexOf(d),Fe=h==="arrowright"?D[(Le+1)%D.length]:D[(Le+D.length-1)%D.length];Fe&&se(Fe,!0)}}else if(/[a-z]/i.test(h)){let g=!1;J.forEach((d,S)=>{g||d.forEach(_=>{if(g)return;_[0].localeCompare(h,"en",{sensitivity:"base"})===0&&(s.preventDefault(),g=!0,se(S))})})}const m=document.getElementById("board");if(m==null?void 0:m.querySelector){const g=m.querySelector(`.row:nth-child(${z+1})`);(g==null?void 0:g.scrollIntoView)&&g.scrollIntoView({behavior:"smooth",block:"nearest"})}};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[ie,J,$,z,L]);const de=location.origin+location.pathname+"#"+u.id,Ke=location.host+location.pathname+"#"+u.id,Ce=R.map(n=>n.join("")).join(`
`).trim(),ke=L==="won"?Ce.split(`
`).length:"X",Ie=`${ke}/${He}`,j=`${`${t("app.title")} [${u.id}]${G?" \u{1F525}":""} ${Ie}

${Ce}`}

${Ke}`,Se=V(()=>{const n=[],s=u.idiom.split(""),h=ie.filter(d=>!s.includes(d)&&!le.has(d)).slice(0,-1).slice(0,3).map(d=>t("hints.absentLetter",{letter:d,pinyin:P(d)})).sort(()=>Math.random()-.5);n.push(...h),(v==null?void 0:v.zh)&&s.filter(d=>v.zh.includes(d)).length<=2&&n.push(`\u2139\uFE0F ${v.zh}`),(v==null?void 0:v.en)&&n.push(`\u2139\uFE0F ${v.en}`);const m=s.filter(d=>!ae.has(d)&&!ce.has(d)).slice(0,-1).map(d=>t("hints.presentLetter",{letter:d,pinyin:P(d)})).sort(()=>Math.random()-.5);n.push(...m);const g=P(u.idiom,{pattern:"first",type:"array"}).join("");return n.push(t("hints.abbreviatedPinyin",{pinyinHint:g})),window.HINTS=n,n},[u.idiom,v]),X=Re(0);T(()=>{X.current=0},[u.idiom]);const We=()=>{if(L)return;const n=Se[X.current];X.current=(X.current+1)%Se.length,W(n)},{toasts:$e}=lt(),Ue=1;T(()=>{$e.filter((n,s)=>n.visible&&s>=Ue).forEach(n=>Be.dismiss(n.id))},[$e]);const B=V(()=>{if(!!w)try{return Object.keys(localStorage).filter(s=>{const h=s.startsWith(C);if(!h)return!1;const m=s.slice(C.length);return h&&E.find(g=>g.id===m)}).length}catch(n){}},[w]);T(()=>{if(!B||B<10)return;const n=B<100?1:2,s=+B.toPrecision(n);A("Games Played",{props:{count:s}})},[B]);const qe=dt(()=>a("b",{children:[B,B>=Ne&&a(H,{children:[" ","/"," ",e("a",{href:"#",onClick:n=>{n.preventDefault(),y(!1),c(!0)},children:E.length})]})]}),[B]);return a(H,{children:[e("header",{children:a("div",{class:"inner",children:[e("button",{type:"button",onClick:()=>{y(!0)},children:e(Et,{width:"16",height:"16"})}),a("span",{children:[e("h1",{children:t("app.title")}),e(Ft,{})]}),e("button",{type:"button",onClick:()=>{p(L||"play")},children:L?t("common.play"):a("svg",{width:"16",height:"16",viewBox:"0 0 290 290",children:[e("title",{children:"..."}),e("path",{fill:"currentColor",d:"M255 110a35 35 0 1 0 0 70 35 35 0 0 0 0-70zM35 110a35 35 0 1 0 0 70 35 35 0 0 0 0-70zM145 110a35 35 0 1 0 0 70 35 35 0 0 0 0-70z"})]})})]})}),e("div",{id:"board",class:`${L} ${G?"hard-mode":""}`,children:$.map((n,s)=>{const h=re(n.v.join(""),{type:"array"});return e("div",{className:`row ${z===s&&i?"error":""} ${z===s?"current":""} ${R[s].join("")}`,children:n.v.map((m,g)=>e(ne,{letter:m,pinyin:h[g],state:R[s][g]},g))},s)})}),e("div",{id:"keyboard",class:`${L} ${G?"hard-mode":""}`,children:a("div",{class:"inner",children:[e("div",{class:"keys",children:ie.map((n,s)=>e("button",{class:`${ae.has(n)?"\u{1F7E9}":""} ${ce.has(n)?"\u{1F7E7}":""} ${le.has(n)?"\u2B1C":""}`,type:"button",tabIndex:-1,onClick:()=>{se(n)},children:a("ruby",{children:[n,e("rp",{children:"("}),e("rt",{children:J.has(n)?[...J.get(n)].sort((h,m)=>h.localeCompare(m,"zh")).join(" \u2E31 "):P(n)}),e("rp",{children:")"})]})}))}),a("div",{class:"row",children:[e("button",{type:"button",onClick:we,tabIndex:-1,children:t("common.enter")}),G?e("b",{class:"hard",children:t("ui.hardMode")}):e("button",{type:"button",class:"stuck",onClick:We,children:t("ui.hint")}),e("button",{type:"button",onClick:ve,tabIndex:-1,children:e("svg",{height:"24",viewBox:"0 0 24 24",width:"24",children:e("path",{fill:"currentColor",d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7.07L2.4 12l4.66-7H22v14zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"})})})]})]})}),a("div",{id:"modal",class:f?"appear":"",onClick:n=>{n.target===n.currentTarget&&p(null)},children:[e(pe,{height:"24",width:"24",class:"close",onClick:()=>{p(null)}}),a("div",{class:"content",children:[e("h2",{children:f==="won"?"\u{1F389}\u{1F389}\u{1F389}":f==="lost"?"\u{1F62D}\u{1F62D}\u{1F62D}":"\u{1F42F}\u{1F42F}\u{1F42F}"}),f==="play"&&a("p",{children:[t("ui.idiomId")," ",e(Ge,{code:u.id,url:de})]}),/(won|lost)/i.test(f)&&a(H,{children:[a("p",{children:[e("b",{class:"answer",children:a("ruby",{children:[u.idiom,e("rp",{children:"("}),e("rt",{children:P(u.idiom)}),e("rp",{children:")"})]})}),a("div",{class:"definition",children:[(v==null?void 0:v.zh)?v.zh.split("").map(n=>P(n)===n?n:a("ruby",{children:[n,e("rp",{children:"("}),e("rt",{children:P(n)}),e("rp",{children:")"})]})):"",(v==null?void 0:v.zh)&&(v==null?void 0:v.en)&&e("br",{}),v==null?void 0:v.en]}),a("small",{children:[a("a",{href:`https://hanyu.baidu.com/s?wd=${u.idiom}&from=zici`,target:"_blank",children:["\u{1F4D6} ",t("glossary.baidu")]}),"\xA0 \xA0",a("a",{href:`https://www.zdic.net/hans/${u.idiom}`,target:"_blank",children:["\u{1F4D6} ",t("glossary.zdic")]})]})]}),a("div",{class:"results-container",children:[e("div",{class:"results",children:j}),a("div",{children:[a("button",{id:"share",onClick:async()=>{try{if(/edge?\//i.test(navigator.userAgent)||/windows/.test(navigator.userAgent))throw new Error("Web Share API not working well here");oe(j),await navigator.share({text:j})}catch(n){oe(j,()=>{W(t("ui.copiedResults"))})}A("Click: Share",{props:{type:"share"}})},children:[t("common.share")," ",e(St,{width:"16",height:"16"})]}),"\xA0",e(Pt,{id:u.id,header:t("app.title"),footer:`[${u.id}]${G?" \u{1F525}":""} ${Ie}`,boardStates:R}),"\xA0",e("a",{class:"button facebook",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(de)}&hashtag=${encodeURIComponent("#chengyuwordle")}`,target:"_blank",onClick:()=>{oe(j),A("Click: Share",{props:{type:"facebook"}})},children:a("svg",{width:"16",height:"16",viewBox:"0 0 96.1 96.1",children:[e("title",{children:"Facebook"}),e("path",{fill:"currentColor",d:"M72 0H59.7c-14 0-23 9.3-23 23.7v10.9H24c-1 0-2 .8-2 2v15.7c0 1.1 1 2 2 2h12.6v39.9c0 1 .8 2 2 2h16.3c1 0 2-1 2-2v-40h14.6c1 0 2-.8 2-1.9V36.5a2 2 0 0 0-2-2H56.8v-9.2c0-4.4 1.1-6.7 6.9-6.7H72c1 0 2-.9 2-2V2c0-1.1-1-2-2-2z"})]})}),"\xA0",e("a",{class:"button tweet",href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(j)}`,target:"_blank",onClick:()=>{A("Click: Share",{props:{type:"twitter"}})},children:a("svg",{height:"16",width:"16",viewBox:"0 0 24 24",children:[e("title",{children:t("common.tweet")}),e("path",{fill:"currentColor",d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})]})}),"\xA0",e(Ge,{code:u.id,url:de})]})]})]}),L==="won"&&ke<=2&&!G&&e("p",{onClick:()=>{p(null),setTimeout(()=>{y(!0)},300)},children:t("ui.easyEnableHardMode")}),a("div",{class:"footer",children:[/won|lost/i.test(L)&&te().id===u.id&&e("p",{children:e("big",{children:e(N,{i18nKey:"ui.nextIdiom",components:[e(Lt,{})]})})}),a("div",{children:[te().id!==u.id&&a(H,{children:[a("a",{href:"./",class:"button strong",children:[e(ee,{width:20,height:20})," ",t("ui.playTodayGame")]}),e("br",{})]}),a("button",{type:"button",onClick:()=>{if(A("Click: Random"),confirm(t("ui.confirmRandom"))){const s=Math.round(Math.random()*(E.length-1)),h=E[s];location.hash=`#${h.id}`,p(null),A("Game load: Random")}},children:[e(ee,{width:20,height:20})," ",t("common.random")]})," ",a("button",{type:"button",onClick:()=>{A("Click: Idiom ID");let n=prompt(t("ui.promptIdiom"));try{n=new URL(n).hash.slice(1)}catch(s){}if(n){const s=E.find(h=>h.id===n);s?(location.hash=`#${s.id}`,p(null),A("Game load: Idiom ID")):W("Invalid idiom ID")}},children:[e(ee,{width:20,height:20})," ",t("common.choose")]})]})]})]})]}),a("div",{id:"info-modal",class:w||!b?"appear":"",children:[b&&e(pe,{height:"32",width:"32",class:"close",onClick:()=>{y(!1)}}),a("div",{class:"content",children:[ye&&a("p",{class:"color-scheme-selector",children:[e("button",{type:"button",class:k==="dark"?"active":"",onClick:()=>{x.setItem(`${C}colorScheme`,"dark"),I("dark")},children:"\u{1F311}"})," ",e("button",{type:"button",class:k==="auto"?"active":"",onClick:()=>{x.removeItem(`${C}colorScheme`),I("auto")},children:"\u{1F313}"})," ",e("button",{type:"button",class:k==="light"?"active":"",onClick:()=>{x.setItem(`${C}colorScheme`,"light"),I("light")},children:"\u{1F315}"})]})," ",a("p",{class:"locale-selector",children:["\u{1F310}"," ",e("a",{href:"./?lng=en",hreflang:"en",rel:o.resolvedLanguage==="en"?void 0:"alternate",class:`${o.resolvedLanguage==="en"?"selected":""}`,onClick:n=>{n.preventDefault(),o.changeLanguage("en")},children:"English"})," ","\u22C5"," ",e("a",{href:"./?lng=zh-CN",hreflang:"zh-CN",rel:o.resolvedLanguage==="zh"?void 0:"alternate",class:`${o.resolvedLanguage==="zh"?"selected":""}`,onClick:n=>{n.preventDefault(),o.changeLanguage("zh-CN")},children:"\u4E2D\u6587"})]}),b&&B>0&&a("div",{id:"stats",children:[e("p",{children:e(N,{i18nKey:"ui.gamesPlayed",components:[e(qe,{})]})}),e("div",{id:"config",children:e("p",{children:a("label",{children:[t("ui.hardMode"),e(ht,{defaultChecked:G,onChange:n=>{x.setItem(`${C}hardMode`,n?"true":"false"),setTimeout(()=>{location.reload()},310)}})]})})})]}),e("h2",{children:t("howToPlay.heading")}),e("p",{children:t("howToPlay.how1")}),e("p",{children:t("howToPlay.how2")}),e("p",{children:t("howToPlay.how3")}),e("div",{class:"example-idiom",children:"\u4E5D\u725B\u4E00\u6BDB".split("").map((n,s)=>e(ne,{letter:n,state:s===0?"\u{1F7E9}":""},n))}),e("p",{children:t("howToPlay.spotCorrect")}),e("div",{class:"example-idiom",children:"\u7406\u6240\u5F53\u7136".split("").map((n,s)=>e(ne,{letter:n,state:s===1?"\u{1F7E7}":""},n))}),e("p",{children:t("howToPlay.spotPresent")}),e("div",{class:"example-idiom",children:"\u7231\u4E0D\u91CA\u624B".split("").map((n,s)=>e(ne,{letter:n,state:s===2?"\u2B1C":""},n))}),e("p",{children:t("howToPlay.spotAbsent")}),e("p",{children:t("howToPlay.how4")}),b?a(H,{children:[e("h2",{children:t("about.heading")}),e("p",{children:e(N,{i18nKey:"about.about1",components:[e("a",{href:"https://github.com/cheeaun/chengyu-wordle/",target:"_blank"}),e("a",{href:"https://cheeaun.com/projects/",target:"_blank"}),e("a",{href:"https://www.nytimes.com/games/wordle/",target:"_blank"})]})}),e("p",{children:e(N,{i18nKey:"about.about2",components:[e("a",{href:"https://www.buymeacoffee.com/cheeaun",target:"_blank"})]})}),e("h2",{children:t("feedback.heading")}),a("ul",{children:[e("li",{children:e("a",{href:"https://t.me/+ykuhfiImLd1kNjk1",target:"_blank",children:t("feedback.telegramGroup")})}),e("li",{children:e(N,{i18nKey:"feedback.githubDiscussions",components:[e("a",{href:"https://github.com/cheeaun/chengyu-wordle/discussions",target:"_blank"})]})}),e("li",{children:e(N,{i18nKey:"feedback.githubIssues",components:[e("a",{href:"https://github.com/cheeaun/chengyu-wordle/issues",target:"_blank"})]})}),e("li",{children:e("a",{href:"https://twitter.com/cheeaun",target:"_blank",children:t("feedback.twitter")})}),e("li",{children:e("a",{href:"https://t.me/cheeaun",target:"_blank",children:t("feedback.telegram")})})]}),a("details",{id:"debugging-container",children:[a("summary",{children:[t("debugging.heading")," (","2441c8f",")"]}),a("div",{children:["Game data:"," ",e("button",{type:"button",onClick:()=>{const n=kt(),s=JSON.stringify({version:1,exportDate:new Date,data:n}),h=new TextEncoder().encode(s),m=new Blob([h],{type:"application/json;charset=utf-8"}),g=URL.createObjectURL(m),d=document.createElement("a");document.body.appendChild(d),d.style="display: none",d.href=g,d.download="chengyu-wordle.gamedata.json",d.click(),URL.revokeObjectURL(g),d.remove()},children:"Export"})," ",a("label",{class:"input-file-button",children:[e("input",{type:"file",accept:".json",onChange:n=>{if(window.FileReader){if(confirm("Are you sure you want to import?"))try{const h=n.target.files[0],m=new FileReader;m.addEventListener("load",g=>{const d=JSON.parse(g.target.result).data,S=confirm("If there are conflicting games data, override them? (Cancel to keep them)");It(d,S)}),m.readAsText(h)}catch(s){W("Unable to import.")}}else W("Import feature is not supported by the current browser.")}}),e("button",{type:"button",children:"Import"})]})]}),e("button",{type:"button",onClick:()=>{confirm(t("debugging.confirmResetGame"))&&(x.removeItem(C+u.id),location.reload())},children:t("debugging.resetGame")}),"\xA0",e("button",{type:"button",onClick:()=>{confirm(t("debugging.confirmClearDB"))&&(clearGames(),location.reload())},children:t("debugging.clearDB")})]})]}):e("p",{children:a("button",{type:"button",class:"large",onClick:()=>{y(!1),x.setItem(C+"skipFirstTime",1),M(!0)},children:[e(ee,{width:"20",height:"20"})," ",t("ui.startPlay")]})})]})]}),r&&a("div",{id:"dashboard-modal",children:[e(pe,{height:"24",width:"24",class:"close",onClick:()=>{c(!1)}}),e(Dt,{})]}),e(ut,{containerStyle:{top:"3.5em"},toastOptions:{className:"toast",style:{pointerEvents:"none"}}})]})}const At={about1:"<0>Built</0> by <1>Chee Aun</1>. <2>Wordle</2> \xA9 The New York Times Company.",about2:"Enjoying the game? <0>Buy me a coffee!</0>",heading:"About"},zt={description:"Wordle, for Chinese idioms - \u6210\u8BED (ch\xE9ngy\u01D4). Guess the idiom in 6 tries.",title:"Chengyu Wordle"},Gt={choose:"Choose",enter:"Enter",image:"Image",play:"Play",random:"Random",share:"Share",tweet:"Tweet"},Rt={heading:"Congratulations, you've made it! {{gamesCount}}+ games!",subheading:"Here you have access to ALL idiom games, including the ones you might have not played. Click on the box to play a specific idiom game.",totalGamesPlayed:"Total games played: <0>{{gamesCountOverTotal}}</0>",wonLost:"\u{1F7E9} Won: <0>{{wonCount}}</0> \xB7 \u{1F7E7} Lost: <1>{{lostCount}}</1>"},Bt={clearDB:"Clear database",confirmClearDB:"Are you sure?",confirmResetGame:"Are you sure?",heading:"Debugging",resetGame:"Reset current idiom game"},Nt={githubDiscussions:"<0>GitHub Discussions</0> (for developers)",githubIssues:"<0>GitHub Issues</0> (for bugs)",heading:"Feedback",telegram:"@cheeaun on Telegram",telegramGroup:"Telegram Group",twitter:"@cheeaun on Twitter"},Ht={baidu:"Baidu",zdic:"ZDIC"},_t={abbreviatedPinyin:"\u2728 Abbreviated pinyin: {{pinyinHint}}",absentLetter:"\u274C The letter {{letter}} ({{pinyin}}) is NOT in the idiom.",presentLetter:"\u2705 The letter {{letter}} ({{pinyin}}) is in the idiom."},Ot={heading:"How to play",how1:"Guess the idiom in 6 tries.",how2:"Each guess must be a valid 4-letter idiom. Hit the enter button to submit.",how3:"After each guess, the color of the tiles will change to show how close your guess was to the idiom.",how4:"A new idiom will be available every day.",spotAbsent:"Gray = not in any spot",spotCorrect:"Green = correct spot",spotPresent:"Yellow = wrong spot"},jt={confirmRandom:"Are you sure you want to start a new random game?",copiedResults:"Copied results to clipboard",copiedURL:"Copied URL to clipboard",countdownNow:"Now!",countPlaying:"{{count}} playing",easyEnableHardMode:'Too easy? Tap \u24D8 to enable "Hard mode \u{1F525}"!',gamesPlayed:"\u{1F4CA} Games played: <0/>",hardMode:"Hard mode \u{1F525}",hint:"I'm stuck",idiomId:"Idiom ID:",nextIdiom:"Next Idiom: <0/>",playTodayGame:"Play today's game!",promptIdiom:"Enter idiom ID/URL:",startPlay:"Let's play!"};var Kt={about:At,app:zt,common:Gt,dashboard:Rt,debugging:Bt,feedback:Nt,glossary:Ht,hints:_t,howToPlay:Ot,ui:jt};const Wt={about1:"\u7531 <1>\u5FD7\u5B89</1> <0>\u5EFA\u9020</0>\u3002 <2>Wordle</2> \xA9 The New York Times Company\u3002",about2:"\u4EAB\u53D7\u6E38\u620F\u5417\uFF1F <0>\u8BF7\u6211\u559D\u676F\u5496\u5561\uFF01</0> ",heading:"\u5173\u4E8E"},Ut={description:"Wordle\uFF0C\u7528\u4E8E\u6C49\u8BED\u6210\u8BED\u2014\u2014\u6210\u8BED\uFF08ch\xE9ngy\u01D4\uFF09\u3002\u5728 6 \u6B21\u5C1D\u8BD5\u4E2D\u731C\u51FA\u6210\u8BED\u3002",title:"\u6210\u8BEDWordle"},qt={choose:"\u9009\u62E9",enter:"Enter",image:"\u56FE\u7247",play:"\u73A9",random:"\u968F\u673A\u7684",share:"\u5206\u4EAB",tweet:"\u9E23\u53EB"},Jt={heading:"\u606D\u559C\u4F60\uFF0C\u4F60\u6210\u529F\u4E86\uFF01 {{gamesCount}}+\u6E38\u620F\uFF01",subheading:"\u5728\u8FD9\u91CC\uFF0C\u60A8\u53EF\u4EE5\u8BBF\u95EE\u6240\u6709\u6210\u8BED\u6E38\u620F\uFF0C\u5305\u62EC\u60A8\u53EF\u80FD\u6CA1\u6709\u73A9\u8FC7\u7684\u6E38\u620F\u3002 \u5355\u51FB\u8BE5\u6846\u4EE5\u73A9\u7279\u5B9A\u7684\u6210\u8BED\u6E38\u620F\u3002",totalGamesPlayed:"\u5DF2\u73A9\u6E38\u620F\u603B\u6570\uFF1A<0>{{gamesCountOverTotal}}</0>",wonLost:"\u{1F7E9} \u83B7\u80DC\uFF1A<0>{{wonCount}}</0> \xB7 \u{1F7E7} \u5931\u8D25\uFF1A<1>{{lostCount}}</1>"},Vt={clearDB:"\u6E05\u9664\u6570\u636E\u5E93",confirmClearDB:"\u4F60\u786E\u5B9A\u5417\uFF1F",confirmResetGame:"\u4F60\u786E\u5B9A\u5417\uFF1F",heading:"\u8C03\u8BD5",resetGame:"\u91CD\u7F6E\u5F53\u524D\u7684\u6210\u8BED\u6E38\u620F"},Xt={githubDiscussions:"<0>GitHub \u8BA8\u8BBA</0>\uFF08\u9488\u5BF9\u5F00\u53D1\u8005\uFF09",githubIssues:"<0>GitHub \u95EE\u9898</0>\uFF08\u9488\u5BF9\u9519\u8BEF\uFF09",heading:"\u56DE\u9988",telegram:"\u7535\u62A5\u4E0A\u7684 @cheeaun",telegramGroup:"\u7535\u62A5\u7FA4",twitter:"\u63A8\u7279\u4E0A\u7684 @cheeaun"},Yt={baidu:"\u767E\u5EA6",zdic:"\u6C49\u5178"},Zt={abbreviatedPinyin:"\u2728 \u7F29\u5199\u62FC\u97F3\uFF1A{{pinyinHint}}",absentLetter:"\u274C \u6210\u8BED\u4E2D\u6CA1\u6709\u5B57\u6BCD {{letter}} ({{pinyin}})\u3002",presentLetter:"\u2705 \u5B57\u6BCD {{letter}} ({{pinyin}}) \u5728\u6210\u8BED\u4E2D\u3002"},Qt={heading:"\u600E\u4E48\u73A9",how1:"\u5728 6 \u6B21\u5C1D\u8BD5\u4E2D\u731C\u51FA\u6210\u8BED\u3002",how2:"\u6BCF\u4E2A\u731C\u6D4B\u90FD\u5FC5\u987B\u662F\u6709\u6548\u7684 4 \u5B57\u6BCD\u4E60\u8BED\u3002\u70B9\u51FB\u56DE\u8F66\u6309\u94AE\u63D0\u4EA4\u3002",how3:"\u6BCF\u6B21\u731C\u6D4B\u540E\uFF0C\u56FE\u5757\u7684\u989C\u8272\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u4EE5\u663E\u793A\u60A8\u7684\u731C\u6D4B\u4E0E\u6210\u8BED\u7684\u63A5\u8FD1\u7A0B\u5EA6\u3002",how4:"\u6BCF\u5929\u90FD\u4F1A\u6709\u4E00\u4E2A\u65B0\u7684\u6210\u8BED\u51FA\u73B0\u3002",spotAbsent:"\u7070\u8272 = \u4E0D\u5728\u4EFB\u4F55\u5730\u65B9",spotCorrect:"\u7EFF\u8272 = \u6B63\u786E\u4F4D\u7F6E",spotPresent:"\u9EC4\u8272 = \u9519\u8BEF\u7684\u4F4D\u7F6E"},en={confirmRandom:"\u60A8\u786E\u5B9A\u8981\u5F00\u59CB\u65B0\u7684\u968F\u673A\u6E38\u620F\u5417\uFF1F",copiedResults:"\u5C06\u7ED3\u679C\u590D\u5236\u5230\u526A\u8D34\u677F",copiedURL:"\u5C06 URL \u590D\u5236\u5230\u526A\u8D34\u677F",countdownNow:"\u73B0\u5728\uFF01",countPlaying:"{{count}}\u5728\u73A9",easyEnableHardMode:"\u592A\u5BB9\u6613\u4E86\uFF1F \u70B9\u51FB\u24D8\u542F\u7528\u201C\u56F0\u96BE\u6A21\u5F0F\u{1F525}\u201D\uFF01 ",gamesPlayed:"\u{1F4CA} \u73A9\u8FC7\u7684\u6E38\u620F\uFF1A<0/>",hardMode:"\u56F0\u96BE\u6A21\u5F0F \u{1F525}",hint:"\u6211\u88AB\u56F0\u4F4F\u4E86",idiomId:"\u6210\u8BEDID:",nextIdiom:"\u4E0B\u4E00\u4E2A\u6210\u8BED\uFF1A<0/>",playTodayGame:"\u73A9\u4ECA\u5929\u7684\u6E38\u620F\uFF01",promptIdiom:"\u8F93\u5165\u6210\u8BED ID/URL\uFF1A",startPlay:"\u8BA9\u6211\u4EEC\u73A9\uFF01"};var tn={about:Wt,app:Ut,common:qt,dashboard:Jt,debugging:Vt,feedback:Xt,glossary:Yt,hints:Zt,howToPlay:Qt,ui:en};ue.use(gt).use(ft).init({resources:{en:{translation:Kt},zh:{translation:tn}},fallbackLng:"en",debug:/localhost/i.test(location.hostname),detection:{lookupLocalStorage:"locale",lookupCookie:"locale"},interpolation:{escapeValue:!1}}).then(t=>{const o=()=>{document.documentElement.lang=ue.resolvedLanguage,document.title=document.querySelector('meta[property="og:title"]').content=t("app.title"),document.querySelector('meta[name="description"]').content=document.querySelector('meta[property="og:description"]').content=t("app.description")};ue.on("languageChanged",o),o()});yt(e(Mt,{}),document.getElementById("app"));export{sn as __vite_legacy_guard};
//# sourceMappingURL=index.899aa292.js.map
