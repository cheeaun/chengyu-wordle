!function(){var e=document.createElement("style");e.innerHTML='html,body{padding:0;margin:0;background-color:#fff;color:#111;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center}body,button,input{font-family:Nunito,Helvetica Neue,Helvetica,Arial,PingFang SC,Microsoft YaHei,sans-serif}a{color:green;font-weight:700;text-underline-offset:.15em}*{box-sizing:border-box}button,input{touch-action:manipulation;color:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button,svg{vertical-align:middle}header{border-bottom:1px solid #ccc;padding:.5em;margin-bottom:2px;-webkit-animation:header-appear .5s ease-in-out both;animation:header-appear .5s ease-in-out both}@-webkit-keyframes header-appear{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}@keyframes header-appear{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}header .inner{margin-top:env(safe-area-inset-top);margin-left:env(safe-area-inset-left);margin-right:env(safe-area-inset-right);max-width:30em;margin:auto;display:flex;justify-content:space-between;gap:.5em;align-items:center}header button{border:0;padding:.2em 1em;margin:0;background-color:rgba(0,128,0,.176);color:inherit;color:green;font-weight:700;border-radius:.5em;cursor:pointer}header button:active{background-color:rgba(0,128,0,.43)}header a,header button{font-size:.8em}header h1{text-transform:uppercase;font-size:1em;margin:0;padding:0}header h1 sup{font-size:.6em;color:red}.locale-selector a:not(.selected){font-weight:400}.locale-selector a.selected{color:#000;font-weight:700;-webkit-text-decoration-color:rgba(0,0,0,.2);text-decoration-color:rgba(0,0,0,.2)}#app{display:flex;flex-direction:column;position:fixed;top:0;right:0;bottom:0;left:0}#board{line-height:1;font-size:1.75em;flex-grow:1;display:flex;flex-direction:column;overflow:auto;-webkit-animation:board-appear .5s ease-in-out both;animation:board-appear .5s ease-in-out both}@-webkit-keyframes board-appear{0%{opacity:0;transform:scale(1.2) translateY(5%)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes board-appear{0%{opacity:0;transform:scale(1.2) translateY(5%)}to{opacity:1;transform:scale(1) translateY(0)}}#board .row{line-height:1;flex-grow:1;display:flex;justify-content:center;max-height:3em;perspective:1000px}#board .row.current~.row{opacity:.5}#board .row.error{-webkit-animation:shake .5s;animation:shake .5s}@-webkit-keyframes shake{10%,90%{transform:translate(-2px)}20%,80%{transform:translate(4px)}30%,50%,70%{transform:translate(-8px)}40%,60%{transform:translate(8px)}}@keyframes shake{10%,90%{transform:translate(-2px)}20%,80%{transform:translate(4px)}30%,50%,70%{transform:translate(-8px)}40%,60%{transform:translate(8px)}}#board .letter{border:2px solid #ccc;display:inline-block;min-width:2em;min-height:2em;text-align:center;line-height:1.5em;margin:1px 2px;aspect-ratio:1;justify-content:center;align-items:center;display:flex}#board .row.error .letter{-webkit-animation:red .5s;animation:red .5s;-webkit-animation-delay:0s!important;animation-delay:0s!important}@-webkit-keyframes red{0%{border-color:#ccc}50%{border-color:#f08080}to{border-color:#ccc}}@keyframes red{0%{border-color:#ccc}50%{border-color:#f08080}to{border-color:#ccc}}#board .letter ruby,#board .letter ruby *{line-height:1em}#board .letter.lettered{-webkit-animation:appear .2s ease-in-out;animation:appear .2s ease-in-out}@-webkit-keyframes appear{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@keyframes appear{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}#board .letter.\\1f7e9 {background-color:green}#board .letter.\\1f7e7 {background-color:orange}#board .letter.\\2b1c {background-color:gray}#board .letter.\\1f7e9 ,#board .letter.\\1f7e7 ,#board .letter.\\2b1c {color:#fff;border-color:rgba(0,0,0,.2);transition:all .3s .15s;-webkit-animation:flip .3s ease-in-out both;animation:flip .3s ease-in-out both}@-webkit-keyframes flip{0%{transform:rotateX(0)}to{transform:rotateX(180deg)}}@keyframes flip{0%{transform:rotateX(0)}to{transform:rotateX(180deg)}}#board .letter.\\1f7e9 >*,#board .letter.\\1f7e7 >*,#board .letter.\\2b1c >*{-webkit-animation:flip-back .3s ease-in-out both;animation:flip-back .3s ease-in-out both}@-webkit-keyframes flip-back{0%{transform:rotateX(0)}to{transform:rotateX(-180deg)}}@keyframes flip-back{0%{transform:rotateX(0)}to{transform:rotateX(-180deg)}}#board .letter.\\1f308 +.letter.\\1f308 ,#board .letter.\\1f308 +.letter.\\1f308 >*{-webkit-animation-delay:.1s;animation-delay:.1s}#board .letter.\\1f308 +.letter.\\1f308 +.letter.\\1f308 ,#board .letter.\\1f308 +.letter.\\1f308 +.letter.\\1f308 >*{-webkit-animation-delay:.2s;animation-delay:.2s}#board .letter.\\1f308 +.letter.\\1f308 +.letter.\\1f308 +.letter.\\1f308 ,#board .letter.\\1f308 +.letter.\\1f308 +.letter.\\1f308 +.letter.\\1f308 >*{-webkit-animation-delay:.3s;animation-delay:.3s}#keyboard{border-top:1px solid #ccc;background-color:#fafafa;-webkit-animation:keyboard-appear .5s ease-in-out both;animation:keyboard-appear .5s ease-in-out both}@-webkit-keyframes keyboard-appear{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}@keyframes keyboard-appear{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}#keyboard .inner{padding:2px;margin-bottom:env(safe-area-inset-bottom);margin-left:env(safe-area-inset-left);margin-right:env(safe-area-inset-right)}#keyboard button{font-size:1.5em;margin:.1em;border:0;padding:.2em;background-color:#d3d6da;border-radius:.2em;cursor:pointer;box-shadow:inset 0 -2px 0 -1px rgba(0,0,0,.25)}#keyboard button.\\2b1c {background-color:gray;color:#fff}#keyboard button.\\1f7e7 {background-color:orange;color:#fff}#keyboard button.\\1f7e9 {background-color:green;color:#fff}#keyboard button:active{color:#fff;background-color:#686868}#keyboard .row{display:flex;justify-content:space-between;max-width:30em;margin:auto}#keyboard .row button{padding:.3em 1em;font-size:1em;text-transform:uppercase;font-weight:700}#keyboard .row button.stuck{background-color:transparent;opacity:.6;font-size:.8em;margin-top:1em;padding:0}#keyboard .row button.stuck:hover{opacity:1}#keyboard .row button.stuck:active{color:inherit}#modal{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(255,255,255,.7);display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity 1s}#modal.appear{pointer-events:auto;opacity:1}#modal h2{margin:0;padding:0}#modal .content{border-radius:8px;box-shadow:0 4px 23px rgba(0,0,0,.2);background-color:#fff;margin:1em;padding:1em;position:relative;width:calc(100% - 2em);max-width:30em;transform:translateY(80vh);transition:transform .3s ease-in-out;overflow:auto}#modal.appear .content{transition-delay:.3s;transform:translateY(0)}#modal .close{position:absolute;top:.25em;right:.25em;cursor:pointer;z-index:1}#modal .answer{font-size:2em}#modal .definition{font-size:.8em}#modal .results{white-space:pre-wrap;padding:1em;margin-bottom:.5em;background-color:#eee;border-radius:.2em;line-height:1.05em;text-align:left;font-size:.8em}#modal a.button,#modal button,#info-modal button{color:green;background-color:rgba(0,128,0,.176);font-size:1.5em;margin:.2em 0;border-radius:.5em;padding:.5em 1em;font-size:1em;text-transform:uppercase;font-weight:700;cursor:pointer;border:0;font-size:.8em}#modal button:active,#info-modal button:active{background-color:rgba(0,128,0,.43)}#modal button#share{color:#fff;background-color:green}#modal a.tweet{color:#fff;background-color:#1da1f2}#modal .idiom-code{font-size:16px;border:0;padding:.2em;border-radius:.5em;width:12ex;text-align:center;background-color:#fff;border:1px solid rgba(0,128,0,.432);font-weight:700}#modal .footer{margin-top:1em}.countdown{font-feature-settings:"tnum";font-variant-numeric:tabular-nums;font-weight:700}#info-modal{pointer-events:none;opacity:0;position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(255,255,255,.7);-webkit-backdrop-filter:blur(10px) saturate(180%);backdrop-filter:blur(10px) saturate(180%);transition:opacity .3s;z-index:100;overflow:auto;display:flex}#info-modal.appear{pointer-events:auto;opacity:1}#info-modal .content{max-width:30em;margin:auto;padding:1em;text-align:left;font-size:.9em}#info-modal h2{margin-top:0;padding-top:0;font-size:1em}#info-modal ul{margin-left:0;padding-left:1.2em}#info-modal .close{position:absolute;top:.25em;right:.25em;cursor:pointer;z-index:1}#info-modal button.large{font-size:1.2em}a.button{display:inline-block;text-decoration:none}a.button.strong{font-size:1em!important}#debugging-container{margin-top:2em}#debugging-container summary{font-weight:700;color:rgba(0,0,0,.5);cursor:pointer;margin-bottom:.5em}@media (max-height: 480px){#board{font-size:1.25em}#keyboard .keys{white-space:nowrap;overflow-x:auto}#keyboard .row button{font-size:.8em;padding:.1em 1em}#keyboard .row button svg{transform:scale(.8)}}@media (max-height: 500px){#board{font-size:1.5em}#keyboard button{font-size:1.25em;padding:.15em}#keyboard .row button{font-size:.9em;padding:.2em 1em}#keyboard .row button svg{transform:scale(.9)}}@media (min-height: 700px){#board{justify-content:center;font-size:1.85em}header a,header button{font-size:1em}header h1{font-size:1.2em}}@media (min-height: 750px){#board{font-size:1.95em}}@media (min-height: 800px){#keyboard .inner{padding-top:5px;padding-bottom:5px}#keyboard button{padding-top:.3em;padding-bottom:.3em}}@media (min-height: 850px){#keyboard .inner{padding-top:10px;padding-bottom:10px}#keyboard button{padding-top:.4em;padding-bottom:.4em}}@media (min-width: 500px){#modal .content{padding:2em}#keyboard .inner{padding-left:5px;padding-right:5px}#keyboard button{padding-left:.35em;padding-right:.35em}}@media (min-width: 600px){#keyboard .inner{padding-left:10px;padding-right:10px}#keyboard button{padding-left:.5em;padding-right:.5em}}\n',document.head.appendChild(e),System.register(["./vendor-legacy.69fd9ae4.js","./pinyin-legacy.e7cdd8b3.js","./all-idioms-legacy.abed5233.js","./game-idioms-legacy.c8cfa8ba.js"],(function(){"use strict";var e,t,o,n,r,a,i,l,s,d,c,m,h,p,u,g;return{setters:[function(p){e=p.j,t=p.a,o=p.F,n=p.u,r=p.l,a=p.y,i=p.d,l=p.c,s=p.T,d=p.i,c=p.B,m=p.b,h=p.S},function(e){p=e.p},function(e){u=e.i},function(e){g=e.d}],execute:function(){const f=e,b=t,y=o,w=e=>p(e,{segment:!0,group:!0}).flat().join(" ").trim(),k=u.split("\n"),v=g.slice(1).map((e=>({id:e[0],idiom:e[1]}))),x="cywd-";window.clearGames=()=>{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t.startsWith(x)&&localStorage.removeItem(t)}},window.allGames=()=>{const e=new Map;for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);if(o.startsWith(x)){const t=JSON.parse(localStorage.getItem(o));e.set(o.replace(x,""),t)}}return e};const z=(e,t)=>{const o="string"==typeof t?t.split(""):t,n="string"==typeof e?e.split(""):e,r=o.length,a=Array.from({length:r},(()=>"⬜"));if(r!==n.length)throw new Error("idioms must have the same length");const i=[];for(let s=0;s<r;s++){o[s]===n[s]&&(a[s]="🟩",i.push(s))}const l=[];for(let s=0;s<r;s++){const e=o[s];if(e!==n[s]){const t=n.indexOf(e);-1===t||i.includes(t)||l.includes(t)||(a[s]="🟧",l.push(t))}}return a};window.getIdiomStates=z;const C=e=>{if(e.some((e=>!!e.length&&e.every((e=>"🟩"===e)))))return"won";const t=e[e.length-1];return!!t.length&&t.every((e=>"🟩"!==e))?"lost":null},I=()=>Array.from({length:6},(()=>({v:Array.from({length:4},(()=>"")),s:!1}))),S=(e,t,o,n=0)=>{let r=t||new Set;r.add(e);let a=o||new Set;const i=e.split("");i.forEach((e=>a.add(e)));let l=0;e:for(let d=0;d<v.length;d++){const e=i[(d+1)%4],t=v.find((({idiom:t})=>!r.has(t)&&t.includes(e)));if(t){for(let e=0;e<t.idiom.length;e++)if(a.add(t.idiom[e]),a.size>=20)break e;r.add(t.idiom),l=0}else{if(l>=5)break e;l+=1}}if(a.size<20||r.size<6){const e=[...r][++n];if(e){const{passedIdioms:t,keys:o}=S(e,r,a,n);r=t,a=o}}if(a.size<20||r.size<6){const e=v[Math.floor(Math.random()*v.length)].idiom;if(e){const{passedIdioms:t,keys:o}=S(e,r,a,0);r=t,a=o}}if(a.size<20||r.size<6){var s;const t=null===(s=v.find((t=>t.idiom===e)))||void 0===s?void 0:s.id;console.error(t,{possibleIdioms:r.size,keySize:a.size,consecutiveFailures:l})}return{passedIdioms:r,keys:a}},L=e=>b("svg",{viewBox:"0 0 20 20",fill:"currentColor",...e,children:[f("title",{children:"▶️"}),f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})]}),$=e=>b("svg",{viewBox:"0 0 24 24",...e,children:[f("title",{children:"✖️"}),f("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),T=new Date(2022,0,27),P=()=>{const e=(new Date).setHours(0,0,0,0)-T,t=Math.floor(e/864e5);return v[Math.max(0,t%v.length)]},D=()=>{const{t:e}=n();let t=(new Date).setHours(0,0,0,0)+864e5;const o=new Date(+T+864e5);t<o&&(t=o);const[i,l]=r("00"),[s,d]=r("00"),[c,m]=r("00"),[h,p]=r(!1);return a((()=>{const e=setInterval((()=>{const o=t-new Date;if(o<=0)return p(!0),void clearInterval(e);l(Math.floor(o/36e5).toString().padStart(2,"0")),d(Math.floor(o/6e4%60).toString().padStart(2,"0")),m(Math.floor(o/1e3%60).toString().padStart(2,"0"))}),1e3);return()=>clearInterval(e)}),[]),h?f("a",{href:"./",children:e("ui.countdownNow")}):b("time",{class:"countdown",children:[i,":",s,":",c]})},R=({code:e,url:t})=>{const{t:o}=n();return e&&f("input",{readOnly:!0,value:e,class:"idiom-code",onClick:n=>{var r;n.target.focus(),n.target.select(),null!==(r=navigator.clipboard)&&void 0!==r&&r.writeText?navigator.clipboard.writeText(t||e).then((()=>{alert(o("ui.copiedURL"))})).catch((e=>{})):(l(t||e),alert(o("ui.copiedURL")))}})};var G={about:{about1:"<0>Built</0> by <1>Chee Aun</1>. <2>Wordle</2> ©️ <3>Josh Wardle</3>.",heading:"About"},app:{description:"Wordle, for Chinese idioms - 成语 (chéngyǔ). Guess the idiom in 6 tries.",title:"Chengyu Wordle"},common:{choose:"Choose",enter:"Enter",play:"Play",random:"Random",share:"Share",tweet:"Tweet"},debugging:{clearDB:"Clear database",confirmClearDB:"Are you sure?",confirmResetGame:"Are you sure?",heading:"Debugging",resetGame:"Reset current idiom game"},feedback:{githubDiscussions:"<0>GitHub Discussions</0> (for developers)",githubIssues:"<0>GitHub Issues</0> (for bugs)",heading:"Feedback",telegram:"@cheeaun on Telegram",telegramGroup:"Telegram Group",twitter:"@cheeaun on Twitter"},glossary:{baidu:"Baidu"},hints:{abbreviatedPinyin:"✨ Abbreviated pinyin: {{pinyinHint}}",absentLetter:"❌ The letter {{letter}} ({{pinyin}}) is NOT in the idiom.",presentLetter:"✅ The letter {{letter}} ({{pinyin}}) is in the idiom."},howToPlay:{heading:"How to play",how1:"Guess the idiom in 6 tries.",how2:"Each guess must be a valid 4-letter idiom. Hit the enter button to submit.",how3:"After each guess, the color of the tiles will change to show how close your guess was to the idiom.",how4:"A new idiom will be available every day.",spotAbsent:"Gray = not in any spot",spotCorrect:"Green = correct spot",spotPresent:"Yellow = wrong spot"},ui:{confirmRandom:"Are you sure you want to start a new random game?",copiedResults:"Copied results to clipboard",copiedURL:"Copied URL to clipboard",countdownNow:"Now!",hint:"I'm stuck",nextIdiom:"Next Idiom: <0/>",playTodayGame:"Play today's game!",promptIdiom:"Enter idiom ID/URL:",startPlay:"Let's play!"}};var M={about:{about1:"由 <1>志安</1> <0>建造</0>。 <2>Wordle</2> ©️ <3>Josh Wardle</3>。",heading:"关于"},app:{description:"Wordle，用于汉语成语——成语（chéngyǔ）。在 6 次尝试中猜出成语。",title:"成语Wordle"},common:{choose:"选择",enter:"Enter",play:"玩",random:"随机的",share:"分享",tweet:"鸣叫"},debugging:{clearDB:"清除数据库",confirmClearDB:"你确定吗？",confirmResetGame:"你确定吗？",heading:"调试",resetGame:"重置当前的成语游戏"},feedback:{githubDiscussions:"<0>GitHub 讨论</0>（针对开发者）",githubIssues:"<0>GitHub 问题</0>（针对错误）",heading:"回馈",telegram:"电报上的 @cheeaun",telegramGroup:"电报群",twitter:"推特上的 @cheeaun"},glossary:{baidu:"百度"},hints:{abbreviatedPinyin:"✨ 缩写拼音：{{pinyinHint}}",absentLetter:"❌ 成语中没有字母 {{letter}} ({{pinyin}})。",presentLetter:"✅ 字母 {{letter}} ({{pinyin}}) 在成语中。"},howToPlay:{heading:"怎么玩",how1:"在 6 次尝试中猜出成语。",how2:"每个猜测都必须是有效的 4 字母习语。点击回车按钮提交。",how3:"每次猜测后，图块的颜色会发生变化，以显示您的猜测与成语的接近程度。",how4:"每天都会有一个新的成语出现。",spotAbsent:"灰色 = 不在任何地方",spotCorrect:"绿色 = 正确位置",spotPresent:"黄色 = 错误的位置"},ui:{confirmRandom:"您确定要开始新的随机游戏吗？",copiedResults:"将结果复制到剪贴板",copiedURL:"将 URL 复制到剪贴板",countdownNow:"现在！",hint:"我被困住了",nextIdiom:"下一个成语：<0/>",playTodayGame:"玩今天的游戏！",promptIdiom:"输入成语 ID/URL：",startPlay:"让我们玩！"}};d.use(c).use(m).init({resources:{en:{translation:G},zh:{translation:M}},fallbackLng:"en",debug:/localhost/i.test(location.hostname),detection:{lookupLocalStorage:"locale",lookupCookie:"locale"},interpolation:{escapeValue:!1}}).then((e=>{const t=()=>{document.documentElement.lang=d.resolvedLanguage,document.title=document.querySelector('meta[name="title"]').content=e("app.title"),document.querySelector('meta[name="description"]').content=e("app.description")};d.on("languageChanged",t),t()})),h(f((function(){var e;const{t:t,i18n:o}=n(),[d,c]=r(localStorage.getItem("cywd-skipFirstTime")||!1),[m,h]=r(v.find((e=>e.id===location.hash.slice(1)))||P());a((()=>{window.addEventListener("hashchange",(()=>{h(v.find((e=>e.id===location.hash.slice(1)))||P())}))}),[]);const[p,u]=r((null===(e=JSON.parse(localStorage.getItem(`cywd-${m.id}`)))||void 0===e?void 0:e.board)||I());a((()=>{const e=localStorage.getItem(`cywd-${m.id}`);u(e?JSON.parse(e).board:I())}),[m.id]);const g=i((()=>p.map(((e,t)=>e.s?z(m.idiom,e.v):[]))),[p]);a((()=>{p&&p.some((e=>e.v.some((e=>e))))&&localStorage.setItem(`cywd-${m.id}`,JSON.stringify({board:p,gameState:C(g)}))}),[g]);const[T,G]=r(null);a((()=>{G(null),fetch(`https://baidu-hanyu-idiom.cheeaun.workers.dev/?wd=${m.idiom}`).then((e=>e.json())).then((e=>{e.definition&&G(e.definition)}))}),[m.idiom]);const M=(null==p?void 0:p.findIndex((e=>!1===e.s)))||0,[E,N]=r(!1),[A,j]=r(!1),[H,B]=r(!1),Y=i((()=>{const{keys:e}=S(m.idiom),t=k.filter((t=>t.split("").every((t=>e.has(t))))).map((e=>`${e} (${w(e)})`)).sort(((e,t)=>e.localeCompare(t,"zh")));return console.groupCollapsed&&(console.groupCollapsed(`${t.length} Possible Idioms [${m.id}] (${e.size} keys):`),console.log(`${t.map(((e,t)=>`${t+1}. ${e}`)).join("\n")}\n\n🚨SPOILER🚨 Type 'ANSWER' to see the answer.`),console.groupEnd()),window.ANSWER=`${m.idiom} (${w(m.idiom)})`,[...e].sort(((e,t)=>e.localeCompare(t,"zh")))}),[m.idiom]),W=(e,t=!1)=>{if(!p[M])return;if(F)return;const o=[...p];let n=o[M].v.findIndex((e=>""===e));t&&(-1===n?n=3:n--),-1!==n&&(o[M].v[n]=e,u(o))},_=new Set,U=new Set,O=new Set;p.forEach(((e,t)=>{e.s&&e.v.forEach(((e,o)=>{const n=g[t][o];"🟩"===n?_.add(e):"🟧"===n?U.add(e):"⬜"===n&&O.add(e)}))}));const X=()=>{if(F)return;console.log("handleEnter"),N(!1);const e=p[M];if(!e)return;const t=e.v.join(""),o=k.includes(t);o?(e.s=!0,u([...p])):setTimeout((()=>{N(!0)}),10),console.log({currentIdiom:t,valid:o})},F=i((()=>C(g)),[g]);a((()=>{j("won"===F?"won":"lost"===F&&"lost")}),[F]);const J=()=>{if(F)return;const e=[...p],t=e[M];if(!t||t.s)return;let o=-1;for(let n=t.v.length-1;n>=0;n--)if(""!==t.v[n]){o=n;break}-1!==o&&(t.v[o]="",u(e))};a((()=>{document.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())}))}),[]),a((()=>{const e=e=>{if(F)return;if(e.metaKey||e.ctrlKey||!e.key)return;const t=e.key.toLowerCase();if("enter"===t)e.preventDefault(),e.stopPropagation(),X();else if("backspace"===t)e.preventDefault(),J();else if(/^arrow(left|right)/i.test(t)){const e=[...p[M].v].reverse().find((e=>""!==e));if(e){const o=w(e)[0],n=Y.filter((e=>w(e)[0]===o));if(n.length<=1)return;const r=n.indexOf(e),a="arrowright"===t?n[(r+1)%n.length]:n[(r+n.length-1)%n.length];a&&W(a,!0)}}else{const o=Y.find((e=>0===w(e)[0].localeCompare(t,"en",{sensitivity:"base"})));o&&(e.preventDefault(),W(o))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[Y,p,M,F]);const K=location.origin+location.pathname+"#"+m.id,q=g.map((e=>e.join(""))).join("\n").trim(),V="won"===F?q.split("\n").length:"X",Q=`${`${t("app.title")} [${m.id}] ${V}/6\n\n${q}`}\n\n${K}`,Z=i((()=>{const e=[],o=m.idiom.split(""),n=Y.filter((e=>!o.includes(e)&&!O.has(e))).slice(0,-1).slice(0,3).map((e=>t("hints.absentLetter",{letter:e,pinyin:w(e)}))).sort((()=>Math.random()-.5));e.push(...n),null!=T&&T.zh&&o.filter((e=>T.zh.includes(e))).length<=2&&e.push(`ℹ️ ${T.zh}`),null!=T&&T.en&&e.push(`ℹ️ ${T.en}`);const r=o.filter((e=>!_.has(e)&&!U.has(e))).slice(0,-1).map((e=>t("hints.presentLetter",{letter:e,pinyin:w(e)}))).sort((()=>Math.random()-.5));e.push(...r);const a=o.map((e=>w(e)[0])).join("").normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e.push(t("hints.abbreviatedPinyin",{pinyinHint:a})),e}),[_,m.idiom,T]),ee=r(0);return a((()=>{ee.current=0}),[m.idiom]),b(y,{children:[f("header",{children:b("div",{class:"inner",children:[f("button",{type:"button",onClick:()=>{B(!0)},children:b("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f("title",{children:"ℹ️"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),f("h1",{children:t("app.title")}),f("button",{type:"button",onClick:()=>{j(F||"play")},children:t("common.play")})]})}),f("div",{id:"board",children:p.map(((e,t)=>f("div",{className:`row ${M===t&&E?"error":""} ${M===t?"current":""}`,children:e.v.map(((e,o)=>{var n;return f("div",{className:`letter ${e?"lettered":""} ${null!==(n=g[t][o])&&void 0!==n?n:""} ${g[t][o]?"🌈":""}`,children:b("ruby",{children:[e||f("span",{style:{opacity:0},children:"一"}),f("rp",{children:"("}),f("rt",{children:w(e)||f(y,{children:" "})}),f("rp",{children:")"})]})},o)}))},t)))}),f("div",{id:"keyboard",children:b("div",{class:"inner",children:[f("div",{class:"keys",children:Y.map(((e,t)=>f("button",{class:`${_.has(e)?"🟩":""} ${U.has(e)?"🟧":""} ${O.has(e)?"⬜":""}`,type:"button",tabIndex:-1,onClick:()=>{W(e)},children:b("ruby",{children:[e,f("rp",{children:"("}),f("rt",{children:w(e)}),f("rp",{children:")"})]})})))}),b("div",{class:"row",children:[f("button",{type:"button",onClick:X,tabIndex:-1,children:t("common.enter")}),f("button",{type:"button",class:"stuck",onClick:()=>{if(F)return;const e=Z[ee.current];ee.current=(ee.current+1)%Z.length,alert(e)},children:t("ui.hint")}),f("button",{type:"button",onClick:J,tabIndex:-1,children:f("svg",{height:"24",viewBox:"0 0 24 24",width:"24",children:f("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7.07L2.4 12l4.66-7H22v14zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"})})})]})]})}),b("div",{id:"modal",class:A?"appear":"",onClick:e=>{e.target===e.currentTarget&&j(null)},children:[f($,{height:"24",width:"24",class:"close",onClick:()=>{j(null)}}),b("div",{class:"content",children:[f("h2",{children:"won"===A?"🎉🎉🎉":"lost"===A?"😭😭😭":"👾👾👾"}),"play"===A&&f("p",{children:f(R,{code:m.id,url:K})}),/(won|lost)/i.test(A)&&b(y,{children:[b("p",{children:[f("b",{class:"answer",children:b("ruby",{children:[m.idiom,f("rp",{children:"("}),f("rt",{children:w(m.idiom)}),f("rp",{children:")"})]})}),b("div",{class:"definition",children:[null==T?void 0:T.zh,(null==T?void 0:T.zh)&&(null==T?void 0:T.en)&&f("br",{}),null==T?void 0:T.en]}),f("small",{children:b("a",{href:`https://hanyu.baidu.com/s?wd=${m.idiom}&from=zici`,target:"_blank",children:["📖 ",t("glossary.baidu")]})})]}),f("div",{class:"results",children:Q}),b("button",{id:"share",onClick:async()=>{try{if(/edge?\//i.test(navigator.userAgent)||/windows/.test(navigator.userAgent))throw new Error("Web Share API not working well here");await navigator.share({text:Q})}catch(e){try{await navigator.clipboard.writeText(Q),alert(t("ui.copiedResults"))}catch(o){l(Q),alert(t("ui.copiedResults"))}}},children:[t("common.share")," ",f("svg",{height:"16",width:"16",viewBox:"0 0 24 24",children:f("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})})]}),"  ",f("a",{class:"button tweet",href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(Q)}`,target:"_blank",children:b("svg",{height:"16",width:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[f("title",{children:t("common.tweet")}),f("path",{fill:"currentColor",d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})]})}),"  ",f(R,{code:m.id,url:K})]}),b("div",{class:"footer",children:[/won|lost/i.test(F)&&P().id===m.id&&f("p",{children:f("big",{children:f(s,{i18nKey:"ui.nextIdiom",components:[f(D,{})]})})}),b("div",{children:[P().id!==m.id&&b(y,{children:[b("a",{href:"./",class:"button strong",children:[f(L,{width:20,height:20})," ",t("ui.playTodayGame")]}),f("br",{})]}),b("button",{type:"button",onClick:()=>{if(confirm(t("ui.confirmRandom"))){const e=Math.round(Math.random()*(v.length-1)),t=v[e];location.hash=`#${t.id}`,j(null)}},children:[f(L,{width:20,height:20})," ",t("common.random")]})," ",b("button",{type:"button",onClick:()=>{let e=prompt(t("ui.promptIdiom"));try{e=new URL(e).hash.slice(1)}catch(o){}if(e){const t=v.find((t=>t.id===e));t?(location.hash=`#${t.id}`,j(null)):alert("Invalid idiom ID")}},children:[f(L,{width:20,height:20})," ",t("common.choose")]})]})]})]})]}),b("div",{id:"info-modal",class:H||!d?"appear":"",children:[d&&f($,{height:"32",width:"32",class:"close",onClick:()=>{B(!1)}}),b("div",{class:"content",children:[b("p",{class:"locale-selector",children:["🌐"," ",f("a",{href:"./?lng=en",hreflang:"en",rel:"en"===o.resolvedLanguage?void 0:"alternate",class:""+("en"===o.resolvedLanguage?"selected":""),onClick:e=>{e.preventDefault(),o.changeLanguage("en")},children:"English"})," ","⋅"," ",f("a",{href:"./?lng=zh-CN",hreflang:"zh-CN",rel:"zh-CN"===o.resolvedLanguage?void 0:"alternate",class:""+("zh-CN"===o.resolvedLanguage?"selected":""),onClick:e=>{e.preventDefault(),o.changeLanguage("zh-CN")},children:"中文"})]}),f("h2",{children:t("howToPlay.heading")}),f("p",{children:t("howToPlay.how1")}),f("p",{children:t("howToPlay.how2")}),f("p",{children:t("howToPlay.how3")}),b("ul",{children:[b("li",{children:["🟩⬜⬜⬜ ",t("howToPlay.spotCorrect")]}),b("li",{children:["⬜🟧⬜⬜ ",t("howToPlay.spotPresent")]}),b("li",{children:["⬜⬜",f("span",{style:{opacity:.5},children:"⬛"}),"⬜"," ",t("howToPlay.spotAbsent")]})]}),f("p",{children:t("howToPlay.how4")}),d?b(y,{children:[f("h2",{children:t("about.heading")}),f("p",{children:f(s,{i18nKey:"about.about1",components:[f("a",{href:"https://github.com/cheeaun/chengyu-wordle/",target:"_blank"}),f("a",{href:"https://cheeaun.com",target:"_blank"}),f("a",{href:"https://www.powerlanguage.co.uk/wordle/",target:"_blank"}),f("a",{href:"https://powerlanguage.co.uk/",target:"_blank"})]})}),f("h2",{children:t("feedback.heading")}),b("ul",{children:[f("li",{children:f("a",{href:"https://t.me/+ykuhfiImLd1kNjk1",target:"_blank",children:t("feedback.telegramGroup")})}),f("li",{children:f(s,{i18nKey:"feedback.githubDiscussions",components:[f("a",{href:"https://github.com/cheeaun/chengyu-wordle/discussions",target:"_blank"})]})}),f("li",{children:f(s,{i18nKey:"feedback.githubIssues",components:[f("a",{href:"https://github.com/cheeaun/chengyu-wordle/issues",target:"_blank"})]})}),f("li",{children:f("a",{href:"https://twitter.com/cheeaun",target:"_blank",children:t("feedback.twitter")})}),f("li",{children:f("a",{href:"https://t.me/cheeaun",target:"_blank",children:t("feedback.telegram")})})]}),b("details",{id:"debugging-container",children:[f("summary",{children:t("debugging.heading")}),f("button",{type:"button",onClick:()=>{confirm(t("debugging.confirmResetGame"))&&(localStorage.removeItem(x+m.id),location.reload())},children:t("debugging.resetGame")})," ",f("button",{type:"button",onClick:()=>{confirm(t("debugging.confirmClearDB"))&&(clearGames(),location.reload())},children:t("debugging.clearDB")})]})]}):f("p",{children:b("button",{type:"button",class:"large",onClick:()=>{B(!1),localStorage.setItem("cywd-skipFirstTime",1),c(!0)},children:[f(L,{width:"20",height:"20"})," ",t("ui.startPlay")]})})]})]})]})}),{}),document.getElementById("app"))}}}))}();
//# sourceMappingURL=index-legacy.fcc5eb15.js.map
