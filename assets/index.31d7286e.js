var Q=Object.defineProperty,U=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(n,c,o)=>c in n?Q(n,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[c]=o,$=(n,c)=>{for(var o in c||(c={}))ee.call(c,o)&&P(n,o,c[o]);if(O)for(var o of O(c))te.call(c,o)&&P(n,o,c[o]);return n},x=(n,c)=>U(n,Z(c));import{j as ne,a as re,F as oe,l as k,y as b,d as _,p as ie,S as se}from"./vendor.cfb7979a.js";import{i as le}from"./all-idioms.effcc4de.js";import{d as ce}from"./game-idioms.4b614f9d.js";const ae=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}};ae();const t=ne,l=re,L=oe,w=n=>ie(n,{segment:!0,group:!0}).flat().join(" ").trim(),de=le.split(`
`),g=ce.slice(1).map(n=>({id:n[0],idiom:n[1]})),he=20,ue=6;window.clearGames=()=>{for(let n=0;n<localStorage.length;n++){const c=localStorage.key(n);c.startsWith("cywd-")&&localStorage.removeItem(c)}};window.allGames=()=>{const n=new Map;for(let c=0;c<localStorage.length;c++){const o=localStorage.key(c);if(o.startsWith("cywd-")){const u=JSON.parse(localStorage.getItem(o));n.set(o.replace("cywd-",""),u)}}return n};const T=n=>{const c=[...n].reverse(),o=c.findIndex(s=>s.some(a=>a.v)),u=c[o];if(u){const s=u.every(p=>p.s==="correct");if(s)return"won";const a=u.every(p=>!!p.s);if(o===0&&!s&&a)return"lost"}return null},K=()=>Array.from({length:ue},()=>Array.from({length:4},()=>({v:"",s:null}))),W=n=>l("svg",x($({viewBox:"0 0 20 20",fill:"currentColor"},n),{children:[t("title",{children:"\u25B6\uFE0F"}),t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"})]})),H=n=>l("svg",x($({viewBox:"0 0 24 24"},n),{children:[t("title",{children:"\u2716\uFE0F"}),t("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}));function fe(){var D;const[n,c]=k(g.find(e=>e.id===location.hash.slice(1))||g[0]);b(()=>{window.addEventListener("hashchange",()=>{c(g.find(e=>e.id===location.hash.slice(1))||g[0])})},[]);const[o,u]=k(((D=JSON.parse(localStorage.getItem(`cywd-${n.id}`)))==null?void 0:D.board)||K());b(()=>{const e=localStorage.getItem(`cywd-${n.id}`);u(e?JSON.parse(e).board:K())},[n.id]),b(()=>{o&&o.some(e=>e.some(r=>r.v))&&localStorage.setItem(`cywd-${n.id}`,JSON.stringify({board:o,gameState:T(o)}))},[o]);const s=(o==null?void 0:o.findIndex(e=>e.some(r=>!r.s)))||0,[a,p]=k(!1),[C,y]=k(!1),[R,M]=k(!1),I=[n.idiom],E=_(()=>{const e=new Set,r=n.idiom.split("");e:for(let i=0;i<g.length;i++){const d=r[(i+1)%r.length],h=g.find(({idiom:f})=>!I.includes(f)&&f.includes(d));if(h){for(let f=0;f<h.idiom.length;f++)if(e.add(h.idiom[f]),e.size>=he)break e;I.push(h.idiom)}}return Array.from(e)},[n.idiom]);b(()=>{const e=I.map(r=>`${r} (${w(r)})`).sort();console.log(`POSSIBLE IDOMS (${n.id}):
${e.map((r,i)=>`${i+1}. ${r}`).join(`
`)}

\u{1F6A8}SPOILER\u{1F6A8} Type 'ANSWER' to see the answer.
`),window.ANSWER=`${n.idiom} (${w(n.idiom)})`},[n.idiom]);const S=(e,r=!1)=>{if(!o[s]||m)return;const i=[...o];let d=i[s].findIndex(f=>f.v==="");r&&(d===-1?d=3:d--);const h=i[s][d];h&&(h.v=e,u(i))},B=o.flat(),J=B.filter(e=>e.s==="correct").map(e=>e.v),X=B.filter(e=>e.s==="present").map(e=>e.v),q=B.filter(e=>e.s==="absent").map(e=>e.v),A=()=>{if(m)return;console.log("handleEnter"),p(!1);const e=o[s].map(i=>i.v).join(""),r=de.includes(e);r?(o[s].forEach((i,d)=>{n.idiom[d]===i.v?i.s="correct":n.idiom.split("").includes(i.v)?i.s="present":i.s="absent"}),u([...o])):setTimeout(()=>{p(!0)},10),console.log({currentIdiom:e,valid:r})},m=_(()=>T(o),[o]);b(()=>{y(m==="won"?"won":m==="lost"?"lost":!1)},[m]);const j=()=>{if(m)return;const e=[...o];if(!e[s])return;const r=[...e[s]].reverse().find(i=>i.v!==""&&i.s===null);r&&(r.v="",u(e))};b(()=>{document.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),e.stopPropagation())})},[]),b(()=>{const e=r=>{if(m||r.metaKey||r.ctrlKey||!r.key)return;const i=r.key.toLowerCase();if(i==="enter")r.preventDefault(),r.stopPropagation(),A();else if(i==="backspace")r.preventDefault(),j();else if(/^arrow(left|right)/i.test(i)){const d=[...o[s]].reverse().find(f=>f.v!==""),h=d==null?void 0:d.v;if(h){const f=w(h)[0],v=E.filter(Y=>w(Y)[0]===f);if(v.length<=1)return;const z=v.indexOf(h),N=i==="arrowright"?v[(z+1)%v.length]:v[(z+v.length-1)%v.length];N&&S(N,!0)}}else{const d=E.find(h=>w(h)[0].localeCompare(i,"en",{sensitivity:"base"})===0);d&&(r.preventDefault(),S(d))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[E,s,m]);const G=o.map(e=>e.some(r=>!!r.v)?`
${e.map(({s:r})=>({correct:"\u{1F7E9}",present:"\u{1F7E8}",absent:"\u2B1C"})[r]).join("")}`:"").join("").trim(),V=m==="won"?G.split(`
`).length:"X",F=`Chengyu Wordle [${n.id}] ${V}/6

${G}

${location.protocol+"//"+location.host+"/#"+n.id}`;return l(L,{children:[l("header",{children:[t("button",{type:"button",onClick:()=>{M(!0)},children:l("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t("title",{children:"\u2139\uFE0F"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),l("h1",{children:["Chengyu Wordle ",t("sup",{children:"beta"})]}),t("button",{type:"button",onClick:()=>{y(m||"play")},children:"Play"})]}),t("div",{id:"board",children:o.map((e,r)=>t("div",{className:`row ${s===r&&a?"error":""} ${s===r?"current":""}`,children:e.map((i,d)=>{var h;return t("div",{className:`letter ${i.v?"lettered":""} ${(h=i.s)!=null?h:""}`,children:l("ruby",{children:[i.v||t("span",{style:{opacity:0},children:"\u4E00"}),t("rp",{children:"("}),t("rt",{children:w(i.v)||t(L,{children:"\xA0"})}),t("rp",{children:")"})]})},d)})},r))}),t("div",{id:"keyboard",children:l("div",{class:"inner",children:[t("div",{class:"keys",children:E.map((e,r)=>t("button",{class:`${J.includes(e)?"correct":""} ${X.includes(e)?"present":""} ${q.includes(e)?"absent":""}`,type:"button",tabIndex:-1,onClick:()=>{S(e)},children:l("ruby",{children:[e,t("rp",{children:"("}),t("rt",{children:w(e)}),t("rp",{children:")"})]})}))}),l("div",{class:"row",children:[t("button",{type:"button",onClick:A,tabIndex:-1,children:"Enter"}),t("button",{type:"button",onClick:j,tabIndex:-1,children:t("svg",{height:"24",viewBox:"0 0 24 24",width:"24",children:t("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7.07L2.4 12l4.66-7H22v14zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"})})})]})]})}),l("div",{id:"modal",class:C?"appear":"",onClick:e=>{e.target===e.currentTarget&&y(null)},children:[t(H,{height:"24",width:"24",class:"close",onClick:()=>{y(null)}}),l("div",{class:"content",children:[t("h2",{children:C==="won"?"\u{1F389}\u{1F389}\u{1F389}":C==="lost"?"\u{1F62D}\u{1F62D}\u{1F62D}":"\u{1F47E}\u{1F47E}\u{1F47E}"}),C==="play"&&l("a",{href:location.protocol+"//"+location.host+"/#"+n.id,children:["\u{1F517} ",location.host+"/#"+n.id]}),/(won|lost)/i.test(C)&&l(L,{children:[l("p",{children:[t("b",{class:"answer",children:l("ruby",{children:[n.idiom,t("rp",{children:"("}),t("rt",{children:w(n.idiom)}),t("rp",{children:")"})]})}),t("br",{})," ",l("small",{children:[l("a",{href:location.protocol+"//"+location.host+"/#"+n.id,children:["\u{1F517} ",n.id]}),"\xA0\xA0",t("a",{href:`https://cc-cedict.org/editor/editor.php?handler=QueryDictionary&querydictionary_search=${n.idiom}`,target:"_blank",children:"\u{1F4D6} CC-CEDICT"})]})]}),t("div",{class:"results",children:F}),l("button",{id:"share",onClick:async()=>{try{await navigator.share({text:F})}catch{try{await navigator.clipboard.writeText(F),alert("Copied results to clipboard")}catch{}}},children:["Share"," ",t("svg",{height:"16",width:"16",viewBox:"0 0 24 24",children:t("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"})})]})]}),l("p",{children:[l("button",{type:"button",onClick:()=>{if(confirm("Are you sure you want to start a new random game?")){const r=Math.round(Math.random()*(g.length-1)),i=g[r];location.hash=`#${i.id}`,y(null)}},children:[t(W,{width:20,height:20})," Random"]})," ",l("button",{type:"button",onClick:()=>{const e=prompt("Enter idiom ID:");if(e){const r=g.find(i=>i.id===e);r?(location.hash=`#${r.id}`,y(null)):alert("Invalid idiom ID")}},children:[t(W,{width:20,height:20})," Choose"]})]})]})]}),l("div",{id:"info-modal",class:R?"appear":"",children:[t(H,{height:"24",width:"24",class:"close",onClick:()=>{M(!1)}}),l("div",{class:"content",children:[t("h2",{children:"How to play"}),t("p",{children:"Guess the idiom in 6 tries."}),t("p",{children:"Each guess must be a valid 4-letter idiom. Hit the enter button to submit."}),t("p",{children:"After each guess, the color of the tiles will change to show how close your guess was to the idiom."}),l("ul",{children:[t("li",{children:"\u{1F7E9}\u2B1C\u2B1C\u2B1C\u2B1C Green = correct spot"}),t("li",{children:"\u2B1C\u{1F7E8}\u2B1C\u2B1C\u2B1C Yellow = wrong spot"}),l("li",{children:["\u2B1C\u2B1C\u2B1C",t("span",{style:{opacity:.5},children:"\u2B1B"}),"\u2B1C Gray = not in any spot"]})]}),t("h2",{children:"About"}),t("p",{children:t("a",{href:"https://github.com/cheeaun/chengyu-wordle/",target:"_blank",children:"Project repository"})}),l("p",{children:[t("a",{href:"https://www.powerlanguage.co.uk/wordle/",target:"_blank",children:"Wordle"})," ","\xA9\uFE0F Josh Wardle"]}),t("h2",{children:"Feedback channels"}),l("ul",{children:[t("li",{children:t("a",{href:"https://t.me/+ykuhfiImLd1kNjk1",target:"_blank",children:"Telegram group"})}),l("li",{children:[t("a",{href:"https://github.com/cheeaun/chengyu-wordle/discussions",target:"_blank",children:"GitHub Discussions"}),"(for developers)"]}),l("li",{children:[t("a",{href:"https://github.com/cheeaun/chengyu-wordle/issues",target:"_blank",children:"GitHub Issues"})," ","(for bugs)"]}),t("li",{children:t("a",{href:"https://twitter.com/cheeaun",target:"_blank",children:"@cheeaun on Twitter"})}),t("li",{children:t("a",{href:"https://t.me/cheeaun",target:"_blank",children:"@cheeaun on Telegram"})})]})]})]})]})}se(t(fe,{}),document.getElementById("app"));
//# sourceMappingURL=index.31d7286e.js.map
